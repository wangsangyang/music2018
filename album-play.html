<!DOCTYPE HTML>
<html>
<head lang="en">
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no">
    <meta http-equiv="Content-Type" charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <title>音乐专辑</title>
    <link rel="stylesheet" type="text/css" href="css/mystyle.css" />
</head>
<body>

<div class="page page-music-album">
<div class="wrap">


<header class="section-top clearfix">
        <div class="left"><a href="index.html"><img class="logo" src="images/logo.png"></a></div>

        <section class="section-search-music">
            <div class="search-box">
                <input type="text" class="search-key">
                <input type="button" class="search-btn" value="搜索">
                <div class="item">
                    <!--<span class="list"><i class="close"></i><i class="text">吉他</i></span>-->
                </div>
            </div>
            <div class="filter-box">
                <i class="mask"></i>
                <dl>
                    <dt class="filter-handle"><i class="text">筛 选</i><i class="icon-arrow-down"></i></dt>
                    <dt class="filter-bodyer">
                        <div class="tab-header clearfix">
                            <span class="menu active">场景</span>
                            <span class="menu">风格</span>
                            <span class="menu">情绪</span>
                            <span class="menu">乐器</span>
                        </div>
                        <ul class="tab-bodyer">
                            <li class="tab-cont active clearfix">
                                <span class="menu">酒吧</span>
                                <span class="menu">酒吧</span>
                                <span class="menu">酒吧</span>
                                <span class="menu">酒吧</span>
                                <span class="menu">酒吧</span>
                                <span class="menu">酒吧</span>
                            </li>
                            <li class="tab-cont clearfix">
                                <span class="menu">摇滚</span>
                                <span class="menu">摇滚</span>
                                <span class="menu">摇滚</span>
                                <span class="menu">摇滚</span>
                                <span class="menu">摇滚</span>
                                <span class="menu">摇滚</span>
                            </li>
                            <li class="tab-cont clearfix">
                                <span class="menu">兴奋</span>
                                <span class="menu">兴奋</span>
                                <span class="menu">欢乐</span>
                                <span class="menu">兴奋</span>
                                <span class="menu">轻音乐</span>
                                <span class="menu">兴奋</span>
                                <span class="menu">兴奋</span>
                            </li>
                            <li class="tab-cont clearfix">
                                <span class="menu">吉他</span>
                                <span class="menu">吉他</span>
                                <span class="menu">吉他</span>
                                <span class="menu">吉他</span>
                                <span class="menu">吉他</span>
                                <span class="menu">吉他</span>
                            </li>
                        </ul>
                    </dt>
                </dl>
            </div>
        </section>

        <div class="right">
            <a class="shopingcar" href="shoppingcar.html">购物车<i class="icon-isgoods"></i></a>
            <a class="person" href="personalCenter/order.html">个人中心</a>
            <a class="signout" href="login.html">退出</a>
        </div>
    </header>

    <div class="main-content">
        <section class="section-album clearfix">
            <article class="left">
                <span class="shopingcar"></span>
                <dl class="clearfix">
                    <dt>
                        <div class="imgbox"><img src="images/bg-album.png"></div>

                        <audio id="myplayer" src="images/zdqc.mp3" preload="auto" style="display: none;"></audio>
                        <div class="player-btns">
                            <span class="btn play-prev" data-src="images/qfdy.mp3"></span>
                            <span class="btn play-next" data-src="images/chengdu.mp3"></span>
                        </div>
                    </dt>
                    <dd>
                        <h3>Siren Label Production</h3>
                        <h1>Siren Songs <br>Imagine Version</h1>
                        <div class="r1">
                            <span>by Jonny Whint.</span>
                            <a href="check-album.html">查看专辑</a>
                        </div>
                    </dd>
                </dl>
            </article>
            <article class="right">
                <ul>
                    <li class="row-1">关键词</li>
                    <li class="row-2">
                        <span class="active">Bright</span>
                        <span>Vocal</span>
                        <span>Male</span>
                        <span>Great</span>
                        <span>巨型科技环绕声</span>
                    </li>
                    <li class="row-3">
                        <label>其他版本</label>
                        <select>
                            <option>主版本</option>
                            <option>副版本</option>
                        </select>
                    </li>
                    <li class="row-4">
                        <label>速度</label>
                        <div class="drag-progress-bar">
                            <span class="total-line">
                                <i class="handle"></i>
                            </span>
                        </div>
                        <span class="info">102BPM</span>
                    </li>
                </ul>
            </article>
        </section>

        <!-- start 结果列表 -->
        <section class="search-result">
            <h1 class="result-title">其他搜索结果</h1>
            <ul class="thead">
                <li>
                    <div class="col-1"></div>
                    <div class="col-2">标题</div>
                    <div class="col-3"></div>
                    <div class="col-4">时长</div>
                    <div class="col-5">BPM</div>
                    <div class="col-6">操作</div>
                </li>
            </ul>
            <ul class="tbody">
                <li data-src="images/zdqc.mp3">
                    <div class="col-1"><i class="icon icon-pause btn-musicPlayer"></i></div>
                    <div class="col-2">
                        <h3>纸短情长</h3>
                        <span>烟把儿乐队</span>
                    </div>
                    <div class="col-3"><i class="icon icon-open"></i></div>
                    <div class="col-4">2:41</div>
                    <div class="col-5">120</div>
                    <div class="col-6">
                        <i class="icon icon-store active"></i>
                        <i class="icon icon-add"></i>
                    </div>
                    <div class="types">
                        <dl class="key-word">
                            <dt>关键词</dt>
                            <dd>
                                <span class="active">Bright</span>
                                <span>Vocal</span>
                                <span>Male</span>
                                <span>Great</span>
                                <span>Bright</span>
                                <span>巨型科技环绕声</span>
                            </dd>
                        </dl>
                        <dl class="version">
                            <dt>版本</dt>
                            <dd>
                                <span>Full</span>
                                <span>30s</span>
                                <span>60s</span>
                            </dd>
                        </dl>
                    </div>
                </li>
                <li data-src="images/qfdy.mp3">
                    <div class="col-1"><i class="icon icon-pause btn-musicPlayer" ></i></div>
                    <div class="col-2">
                        <h3>情非得已</h3>
                        <span>庾澄庆</span>
                    </div>
                    <div class="col-3"><i class="icon icon-open"></i></div>
                    <div class="col-4">2:41</div>
                    <div class="col-5">120</div>
                    <div class="col-6">
                        <i class="icon icon-store active"></i>
                        <i class="icon icon-add"></i>
                    </div>
                    <div class="types">
                        <dl class="key-word">
                            <dt>关键词</dt>
                            <dd>
                                <span class="active">Bright</span>
                                <span>Vocal</span>
                                <span>Male</span>
                                <span>Great</span>
                                <span>Bright</span>
                                <span>Bright</span>
                            </dd>
                        </dl>
                        <dl class="version">
                            <dt>版本</dt>
                            <dd>
                                <span>Full</span>
                                <span>30s</span>
                                <span>60s</span>
                            </dd>
                        </dl>
                    </div>
                </li>
                <li data-src="images/cehngdu.mp3">
                    <div class="col-1"><i class="icon icon-pause btn-musicPlayer"></i></div>
                    <div class="col-2">
                        <h3>成都</h3>
                        <span>赵雷</span>
                    </div>
                    <div class="col-3"><i class="icon icon-open"></i></div>
                    <div class="col-4">2:41</div>
                    <div class="col-5">120</div>
                    <div class="col-6">
                        <i class="icon icon-store active"></i>
                        <i class="icon icon-add"></i>
                    </div>
                    <div class="types">
                        <dl class="key-word">
                            <dt>关键词</dt>
                            <dd>
                                <span class="active">Bright</span>
                                <span>Vocal</span>
                                <span>Male</span>
                                <span>Great</span>
                                <span>Bright</span>
                                <span>Bright</span>
                            </dd>
                        </dl>
                        <dl class="version">
                            <dt>版本</dt>
                            <dd>
                                <span>Full</span>
                                <span>30s</span>
                                <span>60s</span>
                            </dd>
                        </dl>
                    </div>
                </li>
            </ul>
        </section>
        <!-- end 结果列表 -->

    </div>

</div>
</div>


<script type="text/javascript" src="js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="js/myjs.js"></script>
<script type="text/javascript" src="js/audioplayer.js"></script>

<link rel="stylesheet" href="js/APlayer.min.css">
<script src="js/APlayer.min.js"></script>

<div class="musicPlayer">
    <i class="close"></i>
    <i class="icon-show"></i>
    <div class="player-cont">
        <div id="aplayer" class="aplayer"></div>
    </div>
</div>

<script>
    $(function () {
        var audio_list = [];
        $('.search-result .tbody li').each(function () {
            var $li = $(this);
            var src = $li.attr('data-src');
            var title = $li.find('.col-2 h3').text();
            var author = $li.find('.col-2 span').text();
            var audio = {
                name: title,
                artist: author,
                url: src,
            };
            audio_list.push(audio);
        });
        console.log(audio_list);
        var aplayer = new APlayer({
            container: document.getElementById('aplayer'),
            narrow: false,
            autoplay: false,
            preload: 'auto',
            //fixed: true,
            theme: '',
            showlrc: false,
            audio: audio_list
        });

        var $musicPlayer = $('#musicPlayer');
        $('.btn-musicPlayer').on('click',function () {
            var $li = $(this).closest('li');
            var index = $li.index();
            var isactive = $(this).hasClass('active');
            $(this)[isactive?'removeClass':'addClass']('active');
            $li.siblings('li').find('.btn-musicPlayer').removeClass('active');
            /* 如果是暂停 */
            if(!isactive){
                aplayer.list.switch(index);
                aplayer.play();
            }else{
                aplayer.pause();
            }
        });
        aplayer.on('play',function(a){
            $( '#myplayer')[0].pause();
        });
        aplayer.on('pause',function(a){
            console.log(a);
            $('.search-result .tbody li').each(function () {
                var $li = $(this);
                $li.find('.btn-musicPlayer').removeClass('active');
            });
        });
        /* 关闭底部音乐播放器 */
        $( '.musicPlayer .close').on('click',function () {
            aplayer.pause();
            $( '.musicPlayer').addClass('mini');
        });
        /* 展开底部音乐播放器 */
        $( '.musicPlayer .icon-show').on('click',function () {
            $( '.musicPlayer').removeClass('mini');
        });
    });

    $( function() {
        /* 专辑播放器 */
        $( '#myplayer').audioPlayer({
            src:'images/cehngdu.mp3',
            classPrefix: 'myplayer',
            strPlay: '',
            strPause: '',
            strVolume: 'Volume'
        });
        //播放上一首、下一首
        $( '.section-album .player-btns .btn').on('click',function () {
            var src = $(this).attr('data-src');
            $( '#myplayer').prop('src',src);
            $( '#myplayer')[0].play();
            aplayer.pause();
        });
        $( '#myplayer')[0].onplay = function () {
            aplayer.pause();
        };
    });

</script>
</body>
</html>